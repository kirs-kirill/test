<!doctype html>
<html class="no-js" lang="ru" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link rel="index" title="Алфавитный указатель" href="../../genindex.html" /><link rel="search" title="Поиск" href="../../search.html" /><link rel="next" title="1.4. Диагностика каналов на оборудовании KROKS" href="4_kroks_diag.html" /><link rel="prev" title="1.2. Параметры качества сигнала" href="2_signal.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>1.3. Тестовая подсеть - Документация SmartEngin</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=9701f087" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=8f9e6779" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=e61b947c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Документация SmartEngin</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Документация SmartEngin</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Поиск" name="q" aria-label="Поиск">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">1. Техническая документация</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 1. Техническая документация</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_uslugi.html">1.1. Виды предоставляемых услуг связи</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_signal.html">1.2. Параметры качества сигнала</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">1.3. Тестовая подсеть</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_kroks_diag.html">1.4. Диагностика каналов на оборудовании KROKS</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_trace.html">1.5. Трассировка</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_changetechnology.html">1.6. Изменение технологии связи на антенне</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_modems.html">1.7. Модемы и AT-команды</a></li>
<li class="toctree-l2"><a class="reference internal" href="8_tochka_dostupa.html">1.8. Точка доступа</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_install_otrs_db.html">1.9. Установка и настройка скрипта tickets.js</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reglament/index.html">2. Регламентные документы</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 2. Регламентные документы</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reglament/1_inside_regl.html">2.1. Внутренний регламент работы ОТП Уральской региональной дирекции</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/2_money.html">2.2. Алгоритм согласования увеличения стоимости выезда.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/3_oe.html">2.3. Взаимодействие с ОЭ через ОТРС</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/4_mass.html">2.4. Обработка массовых аварий</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/5_matrix_escalation.html">2.5. Матрица эскалации</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/6_mail.html">2.6. Письма на все случаи жизни</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/7_avr.html">2.7. Инструкция АВР</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reglament/8_rtk_bnr.html">2.8. Обработка ТТ Ростелеком Башнефть</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../labs/index.html">3. Лабораторные работы</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 3. Лабораторные работы</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../labs/1_lab.html">3.1. Адресация и статическая маршрутизация</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Примечания</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">Требования к оформлению документации</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../links.html">Ссылки</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../script.html">Файл скрипта для заметок OTRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../test.html">Тестовая страница</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="id1">
<h1><span class="section-number">1.3. </span>Тестовая подсеть<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<p>Здесь мы рассмотрим, что такое тестовая подсеть, для чего вообще она нам нужна и как её использовать.</p>
<p>Иногда клиенты, которым мы доставляем услугу L2-VPN, жалуются на наличие потерь на канале или вовсе на недоступность, хотя при проверке с нашей стороны никаких неисправностей выявлено не было. Для более детальной диагностики канала мы запрашиваем у клиента т.н. тестовую подсеть.</p>
<p><strong>Тестовая подсеть</strong> – это IP-адресация, которую мы прописываем внутри L2-туннеля на разных участках сети для детального тестирования канала на этих участках. В услуге L2 мы тянем VLAN от коммутатора клиента на стыке до оборудования на объекте.</p>
<figure class="align-center">
<img alt="Тестовая_подсеть_1.png" src="../../_images/%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D1%81%D0%B5%D1%82%D1%8C_1.png" />
</figure>
<p>Стык с клиентом — это буквально кабель между нашим коммутатором и клиентским.</p>
<p>Внутри этого VLAN нет нашей IP-адресации, то есть на своем коммутаторе во VLAN клиент прописал IP-адрес и на оборудовании на объекте прописал IP из той же подсети. Другой адресации обычно во VLAN нет.</p>
<figure class="align-center">
<img alt="Тестовая_подсеть_2.png" src="../../_images/%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D1%81%D0%B5%D1%82%D1%8C_2.png" />
</figure>
<p>Логически это выглядит как будто протянули кабель от коммутатора до конечного оборудования.</p>
<p>Дома, если есть какие-то проблемы, то ты переткнешь кабель и перезагрузишь роутер, но у нас канал составной, и проблема может быть на любом участке.</p>
<figure class="align-center">
<img alt="Тестовая_подсеть_3.png" src="../../_images/%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D1%81%D0%B5%D1%82%D1%8C_3.png" />
</figure>
<p>Тут в дело включается тестовая подсеть – она навешивается на каждом участке и позволяет проверить их на наличие проблем: потери, не проходят большие пакеты,высокие задержки</p>
<figure class="align-center" id="id7">
<img alt="Тестовая_подсеть_4.jpg" src="../../_images/%D0%A2%D0%B5%D1%81%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D1%81%D0%B5%D1%82%D1%8C_4.jpg" />
<figcaption>
<p><span class="caption-text">Схема внутри роутера</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id8">
<img alt="Ether1_vpls.jpg" src="../../_images/Ether1_vpls.jpg" />
<figcaption>
<p><span class="caption-text">Интерфейсы ether1 и vpls1 имеют флаг S - slave, это значит что они объединены в бридж</span><a class="headerlink" href="#id8" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id9">
<img alt="Ports_on_bridge.jpg" src="../../_images/Ports_on_bridge.jpg" />
<figcaption>
<p><span class="caption-text">Интерфейсы в бридже</span><a class="headerlink" href="#id9" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id10">
<img alt="Hosts.jpg" src="../../_images/Hosts.jpg" />
<figcaption>
<p><span class="caption-text">МАС-адреса, которые приходят на антенну, флаг L - Local, означает что адреса принадлежат самой антенне, на интерфейс ether1 приходит МАС-адрес с оборудования клиента на объекте, на vpls1- МАС-адрес со стыка</span><a class="headerlink" href="#id10" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Примерно так это выглядит внутри антенны: на антенне строится интерфейс VPLS или EoIP, в котором ходит маркированный трафик во VLAN, и VLAN этот тянется до стыка с клиентом.</p>
<p>А с другой стороны, есть физический порт ether1, в который подключается конечное оборудование на объекте.</p>
<p>И есть бридж L2XC, который просто пересылает трафик между интерфейсами и внутри этого бриджа мы и видим МАС-адреса, которые прилетают с обеих сторон бриджа – с порта ether1 и с интерфейса VPLS/EoIP (т.е. со стыка).</p>
<p>Когда нам выделяют тестовую подсеть, то мы прописываем свободный адрес на бридже и можем пинговать клиентские адреса в обе стороны.</p>
<p>Обычно мы запрашиваем тестовую подсеть с маской /29, потому что там достаточно свободных адресов, чтобы прописать их на каждом участке.</p>
<div class="table-wrapper docutils container" id="id11">
<table class="docutils align-default" id="id11">
<caption><span class="caption-text">Таблица адресации</span><a class="headerlink" href="#id11" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Подсеть</p></th>
<th class="head"><p>/29</p></th>
<th class="head"><p>/30</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Адрес</p></td>
<td><p>192.168.62.0</p></td>
<td><p>192.168.62.0</p></td>
</tr>
<tr class="row-odd"><td><p>Bitmask</p></td>
<td><p>29</p></td>
<td><p>30</p></td>
</tr>
<tr class="row-even"><td><p>Netmask</p></td>
<td><p>255.255.255.248</p></td>
<td><p>255.255.255.252</p></td>
</tr>
<tr class="row-odd"><td><p>Wildcard</p></td>
<td><p>0.0.0.7</p></td>
<td><p>0.0.0.3</p></td>
</tr>
<tr class="row-even"><td><p>Network</p></td>
<td><p>192.168.62.0</p></td>
<td><p>192.168.62.0</p></td>
</tr>
<tr class="row-odd"><td><p>Broadcast</p></td>
<td><p>192.168.62.7</p></td>
<td><p>192.168.62.3</p></td>
</tr>
<tr class="row-even"><td><p>Hostmin</p></td>
<td><p>192.168.62.1</p></td>
<td><p>192.168.62.1</p></td>
</tr>
<tr class="row-odd"><td><p>Hostmax</p></td>
<td><p>192.168.62.6</p></td>
<td><p>192.168.62.2</p></td>
</tr>
<tr class="row-even"><td><p>Hosts</p></td>
<td><p>6</p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
</div>
<p>Таким образом, видно, что в /29 подсети 6 адресов, которые можно использовать. Обычно, клиент использует 1 и 2 адреса из подсети, а остальные можем использовать мы.</p>
<p>А в /30 подсети всего 2 адреса, которые можно назначить устройствам, и их полностью занимает клиент. /30 подсеть тоже можно использовать, но есть свои особенности, их мы рассмотрим ниже.</p>
<section id="id2">
<h2><span class="section-number">1.3.1. </span>Как это работает.<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>Теперь рассмотрим, как же пользоваться тестовой подсетью.</p>
<section id="id3">
<h3><span class="section-number">1.3.1.1. </span>Клиент выделил /29 подсеть.<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Нужно убедиться в том, что выделенная адресация корректна. Бывает так, что клиент выделяет подсеть, но адреса не соответствуют подсети и тестирование будет некорректно. Для этого нужно зайти на сайт ip-calculator.ru и вставить в поле IP адрес ту тестовую подсеть, которую выделил клиент и нажать Подсчитать. В поле IP адреса можно так же вводить данные в формате IP/mask, например 192.168.0.1/16. В получившейся таблице нужно проверить, что свободные и используемые клиентом адреса находятся в диапазоне между Hostmin и Hostmax. Если всё верно, то переходим к следующему шагу, если же нет, то просим клиента выделить корректную подсеть.</p></li>
<li><p>Из свободных адресов подсети нужно выбрать один адрес и прописать его на интерфейсе L2XC. Таким образом, мы сможем пинговать как клиентское оборудование на объекте, так и клиентскую адресацию на стыке.</p></li>
<li><p>Провести стандартное тестирование радиоканала под нагрузкой, но вместо адреса РУСа, нужно пинговать клиентский адрес на стыке. Одновременно с этим нужно пинговать большими пакетами клиентскую адресацию на объекте.</p></li>
<li><p>Если с нашей стороны всё хорошо, то отправляем клиенту собранную статистику. Если в результате тестирования выявлены проблемы, то устраняем их.</p></li>
<li><p>После согласования закрытия ТТ нужно удалить тестовую адресацию с интерфейса.</p></li>
</ol>
<section id="id4">
<h4><span class="section-number">1.3.1.1.1. </span>Пример с /29 подсетью.<a class="headerlink" href="#id4" title="Link to this heading">#</a></h4>
<p>Клиент выделил подсеть 192.168.78.0/29.</p>
<p>На объекте используется 192.168.78.2, на РУС - 192.168.78.1.</p>
<p>Таким образом, свободны адреса 192.168.78.3 и 192.168.78.4, их то мы и используем.</p>
<p>Прописываем 192.168.78.3/29 на интерфейсе L2XC.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Адресация прописывается в IP -&gt; Adressess, для добавления адреса надо нажать плюсик.</p>
</div>
<figure class="align-center" id="id12">
<img alt="IP_Address_L2XC.png" src="../../_images/IP_Address_L2XC.png" />
<figcaption>
<p><span class="caption-text">Формат адреса на интерфейсе.</span><a class="headerlink" href="#id12" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>И теперь мы можем пинговать в обе стороны в этой подсети.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">ping</span> <span class="n">address</span><span class="o">=</span><span class="mf">192.168.78.1</span>
  <span class="n">SEQ</span> <span class="n">HOST</span>                                     <span class="n">SIZE</span> <span class="n">TTL</span> <span class="n">TIME</span>  <span class="n">STATUS</span>
    <span class="mi">0</span> <span class="mf">192.168.78.1</span>                               <span class="mi">56</span> <span class="mi">255</span> <span class="mi">73</span><span class="n">ms</span>
    <span class="mi">1</span> <span class="mf">192.168.78.1</span>                               <span class="mi">56</span> <span class="mi">255</span> <span class="mi">72</span><span class="n">ms</span>
    <span class="mi">2</span> <span class="mf">192.168.78.1</span>                               <span class="mi">56</span> <span class="mi">255</span> <span class="mi">61</span><span class="n">ms</span>
    <span class="n">sent</span><span class="o">=</span><span class="mi">3</span> <span class="n">received</span><span class="o">=</span><span class="mi">3</span> <span class="n">packet</span><span class="o">-</span><span class="n">loss</span><span class="o">=</span><span class="mi">0</span><span class="o">%</span> <span class="nb">min</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">61</span><span class="n">ms</span> <span class="n">avg</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">68</span><span class="n">ms</span> <span class="nb">max</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">73</span><span class="n">ms</span>

<span class="o">&gt;</span> <span class="n">ping</span> <span class="n">address</span><span class="o">=</span><span class="mf">192.168.78.2</span>
  <span class="n">SEQ</span> <span class="n">HOST</span>                                     <span class="n">SIZE</span> <span class="n">TTL</span> <span class="n">TIME</span>  <span class="n">STATUS</span>
    <span class="mi">0</span> <span class="mf">192.168.78.2</span>                               <span class="mi">56</span>  <span class="mi">64</span> <span class="mi">0</span><span class="n">ms</span>
    <span class="mi">1</span> <span class="mf">192.168.78.2</span>                               <span class="mi">56</span>  <span class="mi">64</span> <span class="mi">0</span><span class="n">ms</span>
    <span class="mi">2</span> <span class="mf">192.168.78.2</span>                               <span class="mi">56</span>  <span class="mi">64</span> <span class="mi">0</span><span class="n">ms</span>
    <span class="n">sent</span><span class="o">=</span><span class="mi">3</span> <span class="n">received</span><span class="o">=</span><span class="mi">3</span> <span class="n">packet</span><span class="o">-</span><span class="n">loss</span><span class="o">=</span><span class="mi">0</span><span class="o">%</span> <span class="nb">min</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">0</span><span class="n">ms</span> <span class="n">avg</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">0</span><span class="n">ms</span> <span class="nb">max</span><span class="o">-</span><span class="n">rtt</span><span class="o">=</span><span class="mi">0</span><span class="n">ms</span>
</pre></div>
</div>
</section>
</section>
<section id="id5">
<h3><span class="section-number">1.3.1.2. </span>Клиент выделил /30 подсеть.<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p>Проблема в том, что адресов, которые можно назначить устройствам, в этой подсети всего 2 и оба используются клиентом.</p>
<p>В этой ситуации нам придется разорвать L2-связность между стыком и клиентским оборудованием и для оборудования на объекте стать на время РУСом, а для РУСа - клиентским оборудованием на объекте.</p>
<p>Рассмотрим это пошагово:</p>
<ol class="arabic simple">
<li><p>Выключить интерфейс vpls1, прописать адрес клиентского РУСа на L2XC. Таким образом мы выступи в роли РУСа для клиентского оборудования и сможем проверить физику на наличие потерь пакетов.</p></li>
<li><p>Убрать адрес РУСа с антенны, выключить интерфейс ether1, включить vpls1, прописать адрес клиентского оборудования на интерфейсе L2XC. Так мы «станем» клиентским оборудованием для РУСа и сможем провести тестирование радиоканала.</p></li>
<li><p>После проведения всех тестов необходимо удалить тестовую адресацию с антенны и включить обратно vpls1.</p></li>
</ol>
<section id="id6">
<h4><span class="section-number">1.3.1.2.1. </span>Пример с /30 подсетью.<a class="headerlink" href="#id6" title="Link to this heading">#</a></h4>
<p>Для примера, клиент выделил подсеть 192.168.78.0/30, на объекте используется 192.168.78.2, на РУС - 192.168.78.1. Свободных адресов для использования нами нет, придется использовать уже занятые клиентом. Но для того, чтобы на сети не возникло конфликта адресов, нужно поочередно отключать интерфейсы, на которых эти адреса уже используются. Отключаем vpls1, прописываем адрес РУСа на L2XC (192.168.78.1/29) и пингуем клиентское оборудование.</p>
<figure class="align-center" id="id13">
<img alt="IP_Address_30_ether1.png" src="../../_images/IP_Address_30_ether1.png" />
<figcaption>
<p><span class="caption-text">Выключить vpls1, прописать адрес на L2XC, пропинговать клиентское оборудование.</span><a class="headerlink" href="#id13" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>После этого отключаем ether1, прописываем адрес клиентского оборудования на L2XC (192.168.78.2/29), включаем vpls1 и тестируем радиоканал пингуя стык.</p>
<figure class="align-center" id="id14">
<img alt="IP_Address_30_vpls1.png" src="../../_images/IP_Address_30_vpls1.png" />
<figcaption>
<p><span class="caption-text">Выключить ether1, прописать адрес на L2XC, пропинговать РУС под нагрузкой.</span><a class="headerlink" href="#id14" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>После завершения тестирования удаляем адресацию с L2XC и включаем ether1.</p>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="4_kroks_diag.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">1.4. </span>Диагностика каналов на оборудовании KROKS</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="2_signal.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">1.2. </span>Параметры качества сигнала</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, usem
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">1.3. Тестовая подсеть</a><ul>
<li><a class="reference internal" href="#id2">1.3.1. Как это работает.</a><ul>
<li><a class="reference internal" href="#id3">1.3.1.1. Клиент выделил /29 подсеть.</a><ul>
<li><a class="reference internal" href="#id4">1.3.1.1.1. Пример с /29 подсетью.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">1.3.1.2. Клиент выделил /30 подсеть.</a><ul>
<li><a class="reference internal" href="#id6">1.3.1.2.1. Пример с /30 подсетью.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=372fde1a"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="module" src="../../_static/scripts/furo.js?v=3e7832f7"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    <script src="../../_static/clipboard.min.js?v=66b4909c"></script>
    <script src="../../_static/copybutton.js?v=71494f10"></script>
    <script src="../../_static/translations.js?v=29b1f277"></script>
    </body>
</html>